{"id":"bd-13a","title":"PRM-PRO-0021: release workflow parity with rvl","description":"Bring profile release automation to rvl-level standards (tag-driven GitHub Release + artifacts).\n\n## Acceptance Criteria\n\nMirror rvl's release.yml exactly, substituting `rvl` → `profile` for binary/archive names:\n\n1. **5-target build matrix** (fail-fast: false):\n   - x86_64-unknown-linux-gnu (ubuntu-latest, cargo)\n   - aarch64-unknown-linux-gnu (ubuntu-latest, cross)\n   - x86_64-apple-darwin (macos-15-intel, cargo)\n   - aarch64-apple-darwin (macos-14, cargo)\n   - x86_64-pc-windows-msvc (windows-latest, cargo)\n2. **Version extraction** from Cargo.toml via python3 tomllib (not grep).\n3. **Binary stripping** per-platform (strip, strip -x, aarch64-linux-gnu-strip).\n4. **Archive packaging**: tar.gz (unix), zip (windows). Named `profile-{version}-{target}.{ext}`.\n5. **SHA256SUMS** generated from all archives with `sha256sum`.\n6. **Cosign signing** of SHA256SUMS (sigstore/cosign-installer@v3, keyless `sign-blob --yes`).\n7. **SBOM generation** via cargo-cyclonedx (JSON CycloneDX format → `sbom.cdx.json`).\n8. **SLSA provenance** statement (in-toto Statement/v1, slsa.dev/provenance/v1) → `provenance.intoto.jsonl`.\n9. **Tag creation** if missing (auto-tag from version, push to origin).\n10. **Release upload** via softprops/action-gh-release@v2 with all artifacts.\n11. **Trigger**: workflow_dispatch + push to main when Cargo.toml changes.\n\n## Notes\n- Use rvl's release.yml as the literal template — copy and adapt, don't reinvent.\n- Homebrew tap update is tracked separately in bd-5q4.\n- Keep implementation consistent with rvl/shape/lock conventions where possible.\n\n## Reference\n- Source template: `rvl/.github/workflows/release.yml`","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-25T04:38:11.606702Z","created_by":"zac","updated_at":"2026-02-27T03:55:38.056935Z","closed_at":"2026-02-27T03:55:38.056829Z","close_reason":"Added rvl-parity release workflow for profile artifacts with required matrix/signing/provenance/release upload flow per PRM-PRO-0021.","compaction_level":0,"original_size":0,"labels":["ci","phase-0","profile","release"],"comments":[{"id":22,"issue_id":"bd-13a","author":"Zac","text":"RESERVATIONS: .github/workflows/release.yml. PHASE: 0 (no deps). Independent of code beads.","created_at":"2026-02-26T12:26:16Z"},{"id":71,"issue_id":"bd-13a","author":"Zac","text":"Starting implementation: copy rvl release workflow template, adapt binary/archive naming to profile, keep 5-target matrix + version read via tomllib + strip/pack/sign/sbom/provenance + tag creation + release upload; leave Homebrew updates for bd-5q4.","created_at":"2026-02-27T03:54:32Z"},{"id":72,"issue_id":"bd-13a","author":"Zac","text":"Implemented .github/workflows/release.yml using rvl release template adapted to profile naming: 5-target matrix, version extraction via python3 tomllib, per-platform strip, tar.gz/zip packaging as profile-{version}-{target}, SHA256SUMS generation, cosign keyless signing, cargo-cyclonedx SBOM, SLSA provenance statement, auto-tag if missing, and softprops/action-gh-release upload. Trigger set to workflow_dispatch + push(main) on Cargo.toml changes. Homebrew update intentionally left to bd-5q4.","created_at":"2026-02-27T03:55:38Z"}]}
{"id":"bd-1cb","title":"PRM-PRO-0020: push/pull data-fabric wrappers","description":"Implement deferred network subcommands `profile push` / `profile pull` as thin data-fabric wrappers.\n\n## Acceptance Criteria\n- push publishes frozen profile payload and reports success/failure deterministically.\n- pull fetches profile by ID and writes to output directory with validation.\n- Transport and server errors map to refusal envelopes (exit 2).\n\n## Notes\nDeferred scope; avoid blocking v0.1 local profile workflows.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-25T04:25:01.745146Z","created_by":"zac","updated_at":"2026-02-26T12:38:26.694764Z","compaction_level":0,"original_size":0,"labels":["deferred","network","phase-2","profile"],"dependencies":[{"issue_id":"bd-1cb","depends_on_id":"bd-1r7","type":"blocks","created_at":"2026-02-25T04:44:56.658434Z","created_by":"zac"},{"issue_id":"bd-1cb","depends_on_id":"bd-2va","type":"blocks","created_at":"2026-02-25T04:25:03.461170Z","created_by":"zac"},{"issue_id":"bd-1cb","depends_on_id":"bd-qzc","type":"blocks","created_at":"2026-02-25T04:44:56.610738Z","created_by":"zac"}],"comments":[{"id":45,"issue_id":"bd-1cb","author":"Zac","text":"RESERVATIONS: src/network/push.rs, src/network/pull.rs, src/network/mod.rs. PHASE: 5 (P2, after bd-2va + bd-1r7 + bd-qzc). Deferred.","created_at":"2026-02-26T12:27:23Z"}]}
{"id":"bd-1g5","title":"PRM-PRO-0009: lint against dataset","description":"Implement `profile lint <PROFILE> --against <DATASET>` profile-vs-dataset checks.\n\n## Acceptance Criteria\n- Verifies referenced include_columns and key columns exist in dataset header.\n- Returns exit 1 (ISSUES_FOUND) for lint findings and exit 0 when clean.\n- Dataset parse failures/refusals use structured refusal envelopes (exit 2).\n\n## Notes\nCombines validate + dataset-aware checks.","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-25T04:25:01.173318Z","created_by":"zac","updated_at":"2026-02-26T12:38:54.582849Z","compaction_level":0,"original_size":0,"labels":["csv","lint","phase-2","profile"],"dependencies":[{"issue_id":"bd-1g5","depends_on_id":"bd-1r7","type":"blocks","created_at":"2026-02-25T04:25:02.257381Z","created_by":"zac"},{"issue_id":"bd-1g5","depends_on_id":"bd-e5g","type":"blocks","created_at":"2026-02-25T04:25:02.210025Z","created_by":"zac"}],"comments":[{"id":38,"issue_id":"bd-1g5","author":"Zac","text":"RESERVATIONS: src/lint/lint.rs, src/lint/mod.rs. PHASE: 3 (after bd-e5g). Creates lint module.","created_at":"2026-02-26T12:26:51Z"},{"id":54,"issue_id":"bd-1g5","author":"Zac","text":"PRM-0011 REVISION: Moved from phase-3 to phase-2. No longer depends on bd-2fp.","created_at":"2026-02-26T12:38:54Z"}]}
{"id":"bd-1ha","title":"PRM-PRO-0023: AGENTS.md + swarm coordination contract","description":"Create/upgrade AGENTS.md in profile with explicit multi-agent operating rules aligned to project standards.\\n\\n## Acceptance Criteria\\n- Includes read-rules-first kickoff, br workflow, and no-communication-purgatory guidance.\\n- Includes reservation rule: reserve only specific files, never broad globs/directories.\\n- Includes guidance for handling expected local changes from other agents without panic/revert.\\n\\n## Notes\\nThis bead is documentation/process only; no runtime behavior changes.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-25T04:38:11.709326Z","created_by":"zac","updated_at":"2026-02-26T12:43:29.907513Z","closed_at":"2026-02-26T12:43:29.907421Z","close_reason":"AGENTS.md created with profile-specific content: output contract, decoupled architecture, core invariants, file reservation rules, phase labels, multi-agent coordination. Modeled on lock AGENTS.md style.","compaction_level":0,"original_size":0,"labels":["docs","phase-0","profile","swarm"],"comments":[{"id":24,"issue_id":"bd-1ha","author":"Zac","text":"RESERVATIONS: AGENTS.md. PHASE: 0 (no deps). Documentation only.","created_at":"2026-02-26T12:26:16Z"}]}
{"id":"bd-1r7","title":"PRM-PRO-0003: Refusal system + codes","description":"Implement refusal system and envelope output for profile.v0.\n\n## Acceptance Criteria\n- Refusal codes implemented: E_INVALID_SCHEMA, E_MISSING_FIELD, E_BAD_VERSION, E_ALREADY_FROZEN, E_IO, E_CSV_PARSE, E_EMPTY, E_COLUMN_NOT_FOUND.\n- Per-code detail payloads match plan contract.\n- Refusal envelope emitted on stdout with exit code 2.\n\n## Notes\nNon-goal: command-specific business logic beyond mapping errors to refusal payloads.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-25T04:25:00.864075Z","created_by":"zac","updated_at":"2026-02-27T04:00:15.773282Z","closed_at":"2026-02-27T04:00:15.773177Z","close_reason":"All acceptance criteria completed: 8 refusal codes with structured detail payloads matching plan contract, proper error handling integration with schema validation. Unblocks 14 Phase 1 beads.","compaction_level":0,"original_size":0,"labels":["core","phase-0","profile","refusal"],"comments":[{"id":2,"issue_id":"bd-1r7","author":"Zac","text":"PRM-0004 plan review: refusal envelope is now part of the unified output envelope (PRM-PRO-0029). Refusal detail (code, message, detail, next_command) moves into the envelope result field with outcome=REFUSAL. Without --json, refusals print as human-readable error messages to stderr with code in brackets, e.g. [E_COLUMN_NOT_FOUND].","created_at":"2026-02-26T11:54:43Z"},{"id":20,"issue_id":"bd-1r7","author":"Zac","text":"RESERVATIONS: src/refusal/codes.rs, src/refusal/payload.rs, src/refusal/mod.rs. PHASE: 0 (no deps). Critical path, blocks 14 beads.","created_at":"2026-02-26T12:26:12Z"},{"id":63,"issue_id":"bd-1r7","author":"Zac","text":"PRM-0011 REVISION: Renamed from 'Refusal system + envelope' to 'Refusal system + codes'. Clarifies boundary: this bead implements refusal codes and detail schemas; bd-2fp implements the outer output envelope.","created_at":"2026-02-26T12:38:55Z"}]}
{"id":"bd-1x2","title":"PRM-PRO-0005: stats command implementation","description":"Implement `profile stats <DATASET>` deterministic structural stats for CSV.\n\n## Acceptance Criteria\n- Reports column counts, null rates, and key viability in deterministic column order.\n- Supports human and --json output.\n- CSV parse/empty-data failures map to refusal codes.\n\n## Notes\nCore analysis primitive used by suggest-key and lint diagnostics.","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-25T04:25:00.966791Z","created_by":"zac","updated_at":"2026-02-26T12:38:45.069040Z","compaction_level":0,"original_size":0,"labels":["csv","phase-1","profile","stats"],"dependencies":[{"issue_id":"bd-1x2","depends_on_id":"bd-1r7","type":"blocks","created_at":"2026-02-25T04:43:46.574083Z","created_by":"zac"},{"issue_id":"bd-1x2","depends_on_id":"bd-er7","type":"blocks","created_at":"2026-02-25T04:43:46.523484Z","created_by":"zac"},{"issue_id":"bd-1x2","depends_on_id":"bd-qzc","type":"blocks","created_at":"2026-02-25T04:25:01.894161Z","created_by":"zac"}],"comments":[{"id":8,"issue_id":"bd-1x2","author":"Zac","text":"PRM-0004 plan review: stats --profile must schema-validate the profile YAML (same checks as validate steps b-d) before checking column existence. Refusal set includes E_IO / E_INVALID_SCHEMA / E_MISSING_FIELD from profile validation, plus E_COLUMN_NOT_FOUND for missing columns.","created_at":"2026-02-26T11:55:15Z"},{"id":35,"issue_id":"bd-1x2","author":"Zac","text":"RESERVATIONS: src/stats/stats.rs, src/stats/mod.rs. PHASE: 2 (after bd-2fp). COORDINATION: creates src/stats/mod.rs. bd-2np (suggest-key) will append to it.","created_at":"2026-02-26T12:26:42Z"},{"id":53,"issue_id":"bd-1x2","author":"Zac","text":"PRM-0011 REVISION: Moved from phase-2 to phase-1. No longer depends on bd-2fp (envelope). RESERVATIONS: src/stats/stats.rs only (mod.rs pre-created by scaffold).","created_at":"2026-02-26T12:38:45Z"}]}
{"id":"bd-21t","title":"PRM-PRO-0014: witness append policy","description":"Implement ambient witness append behavior for eligible subcommands + --no-witness.\n\n## Acceptance Criteria\n- Witness records are appended for freeze/validate/lint/stats/suggest-key only.\n- `--no-witness` suppresses witness writes without changing domain exit semantics.\n- output_hash/input metadata follow plan rules per subcommand class.\n\n## Notes\nlist/show/diff/draft/push/pull should not emit witness records in v0.1.","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-25T04:25:01.430112Z","created_by":"zac","updated_at":"2026-02-26T12:27:49.819703Z","compaction_level":0,"original_size":0,"labels":["phase-1","profile","spine","witness"],"dependencies":[{"issue_id":"bd-21t","depends_on_id":"bd-1r7","type":"blocks","created_at":"2026-02-25T04:25:02.634252Z","created_by":"zac"},{"issue_id":"bd-21t","depends_on_id":"bd-qzc","type":"blocks","created_at":"2026-02-25T04:25:02.587102Z","created_by":"zac"}],"comments":[{"id":12,"issue_id":"bd-21t","author":"Zac","text":"PRM-0004 plan review: output_hash for report subcommands (stats, suggest-key, lint, validate) is BLAKE3 of the JSON representation regardless of whether --json was passed — ensures witness hash is stable and independent of output format. Ledger location: ~/.epistemic/witness.jsonl (append-only, hash chain via prev field). If witness append fails after primary operation succeeds, warn on stderr but do not change exit code.","created_at":"2026-02-26T11:55:39Z"},{"id":28,"issue_id":"bd-21t","author":"Zac","text":"RESERVATIONS: src/witness/record.rs, src/witness/ledger.rs, src/witness/mod.rs. PHASE: 1 (after bd-1r7 + bd-qzc). Creates witness module.","created_at":"2026-02-26T12:26:28Z"}]}
{"id":"bd-25t","title":"PRM-PRO-0019: --schema output","description":"Implement `--schema` output for profile YAML schema (deferred scope).\n\n## Acceptance Criteria\n- `--schema` prints valid JSON Schema and exits 0 before input validation.\n- Schema captures draft and frozen variants with required/optional fields.\n- Regression test validates schema structure and key constraints.\n\n## Notes\nDeferred but useful parallel lane for swarm.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-25T04:25:01.691763Z","created_by":"zac","updated_at":"2026-02-26T12:27:49.928621Z","compaction_level":0,"original_size":0,"labels":["deferred","phase-1","profile","schema"],"dependencies":[{"issue_id":"bd-25t","depends_on_id":"bd-er7","type":"blocks","created_at":"2026-02-25T04:25:03.413896Z","created_by":"zac"},{"issue_id":"bd-25t","depends_on_id":"bd-qzc","type":"blocks","created_at":"2026-02-25T04:44:56.567259Z","created_by":"zac"}],"comments":[{"id":30,"issue_id":"bd-25t","author":"Zac","text":"RESERVATIONS: src/output/schema.rs (new file). PHASE: 1 (after bd-er7 + bd-qzc). P2 bead, low priority.","created_at":"2026-02-26T12:26:28Z"}]}
{"id":"bd-29e","title":"PRM-PRO-0024: README parity with rvl style","description":"Upgrade README to rvl-level usability: friendly purpose-first intro, quickstart, real examples, and technical reference.\\n\\n## Acceptance Criteria\\n- Top section clearly answers what/why/how with one copy-paste quickstart.\\n- Includes at least one draft-to-freeze real workflow example and expected outputs.\\n- Technical depth (flags, refusals, witness behavior) is organized in lower sections.\\n\\n## Notes\\nKeep concise but complete for first-time and advanced users.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-25T04:38:11.761237Z","created_by":"zac","updated_at":"2026-02-27T03:49:05.964787Z","closed_at":"2026-02-27T03:49:05.964664Z","close_reason":"README updated to meet PRM-PRO-0024 acceptance criteria (purpose-first top section, copy-paste quickstart, draft-to-freeze example with expected outputs, organized flags/refusal/witness reference).","compaction_level":0,"original_size":0,"labels":["docs","phase-0","profile","readme"],"comments":[{"id":25,"issue_id":"bd-29e","author":"Zac","text":"RESERVATIONS: README.md. PHASE: 0 (no deps). Documentation only.","created_at":"2026-02-26T12:26:16Z"},{"id":64,"issue_id":"bd-29e","author":"Zac","text":"Starting now: audited AGENTS/README/PLAN; updating README for rvl-style parity with clearer quickstart + reorganized technical reference.","created_at":"2026-02-27T03:47:29Z"},{"id":65,"issue_id":"bd-29e","author":"Zac","text":"Completed README parity pass: added What/Why/How opener, copy-paste quickstart, draft→freeze workflow with expected outputs, and lower-section operational contract for flags/exit codes/refusals/witness semantics. Also corrected freeze examples to include --family/--version/--out and replaced outdated limitation about diffing.","created_at":"2026-02-27T03:49:05Z"}]}
{"id":"bd-29f","title":"PRM-PRO-0026: stats/suggest/freeze test suites","description":"Implement focused tests for stats, suggest-key, and freeze deterministic behavior.\n\n## Acceptance Criteria\n- stats/suggest-key outputs and ranking tie-breaks are deterministic.\n- freeze canonicalization/default-fill/hash behavior is validated with golden assertions.\n- Exit contract 0/2 and refusal payloads are asserted for parse/empty/version/frozen errors.\n\n## Notes\nWitness append behavior remains in witness-focused bead.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-25T04:41:27.916264Z","created_by":"zac","updated_at":"2026-02-26T12:38:54.777317Z","compaction_level":0,"original_size":0,"labels":["coverage","phase-2","profile","tests"],"dependencies":[{"issue_id":"bd-29f","depends_on_id":"bd-1r7","type":"blocks","created_at":"2026-02-25T04:41:36.923630Z","created_by":"zac"},{"issue_id":"bd-29f","depends_on_id":"bd-1x2","type":"blocks","created_at":"2026-02-25T04:41:36.729818Z","created_by":"zac"},{"issue_id":"bd-29f","depends_on_id":"bd-2fp","type":"blocks","created_at":"2026-02-26T12:37:20.575750Z","created_by":"zac"},{"issue_id":"bd-29f","depends_on_id":"bd-2np","type":"blocks","created_at":"2026-02-25T04:41:36.778012Z","created_by":"zac"},{"issue_id":"bd-29f","depends_on_id":"bd-2va","type":"blocks","created_at":"2026-02-25T04:41:36.825852Z","created_by":"zac"},{"issue_id":"bd-29f","depends_on_id":"bd-3mb","type":"blocks","created_at":"2026-02-25T04:41:36.874943Z","created_by":"zac"}],"comments":[{"id":15,"issue_id":"bd-29f","author":"Zac","text":"PRM-0004 plan review: suggest-key tiebreaker is column position in header. Viability threshold for --key auto: uniqueness >= 0.95, null_rate = 0.0. freeze --out refuses overwrite of existing files. All --json assertions should verify unified output envelope shape (PRM-PRO-0029).","created_at":"2026-02-26T11:56:06Z"},{"id":42,"issue_id":"bd-29f","author":"Zac","text":"RESERVATIONS: tests/stats.rs, tests/suggest_key.rs, tests/freeze.rs. PHASE: 4 (after bd-2va + bd-2np + bd-1x2 + bd-3mb). Test-only, no src/ changes.","created_at":"2026-02-26T12:27:16Z"},{"id":57,"issue_id":"bd-29f","author":"Zac","text":"PRM-0011 REVISION: Moved from phase-4 to phase-2. Added bd-2fp dep for --json envelope assertions. All impl deps now phase-1.","created_at":"2026-02-26T12:38:54Z"}]}
{"id":"bd-2fp","title":"PRM-PRO-0029: unified output envelope","description":"Implement the unified output envelope and output formatting layer for all --json responses.\n\n## Acceptance Criteria\n- Every --json subcommand wraps output in the envelope: { version, outcome, exit_code, subcommand, result, profile_ref, witness_id }.\n- outcome is always SUCCESS, ISSUES_FOUND, or REFUSAL -- maps 1:1 with exit codes 0, 1, 2.\n- result field contains per-subcommand payload with defined shapes (validate, lint, stats, suggest-key, freeze, list, show, diff).\n- Refusals use the same envelope with outcome=REFUSAL and refusal detail in result.\n- profile_ref populated when a profile was consumed; null otherwise.\n- witness_id links to witness record when written; null if --no-witness or non-witnessed subcommand.\n- Human output (without --json) formatting implemented in src/output/human.rs.\n- Output layer consumes serde_json::Value from subcommand handlers -- subcommand beads are decoupled from envelope formatting.\n\n## Notes\nRuns in parallel with Phase 1 subcommand beads. Subcommand handlers return Result<Value, RefusalPayload>; this bead wraps that in the envelope. Test beads depend on this for --json assertions.","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-26T11:53:59.816186Z","created_by":"zac","updated_at":"2026-02-26T12:38:44.746228Z","compaction_level":0,"original_size":0,"labels":["core","envelope","json","phase-1","profile"],"dependencies":[{"issue_id":"bd-2fp","depends_on_id":"bd-1r7","type":"blocks","created_at":"2026-02-26T11:54:04.506637Z","created_by":"zac"},{"issue_id":"bd-2fp","depends_on_id":"bd-qzc","type":"blocks","created_at":"2026-02-26T11:54:04.559320Z","created_by":"zac"}],"comments":[{"id":26,"issue_id":"bd-2fp","author":"Zac","text":"RESERVATIONS: src/output/json.rs, src/output/human.rs, src/output/mod.rs, src/cli/exit.rs (extends). PHASE: 1 (after bd-qzc + bd-1r7). Blocks 7 subcommand beads.","created_at":"2026-02-26T12:26:28Z"},{"id":48,"issue_id":"bd-2fp","author":"Zac","text":"PRM-0011 REVISION: Runs in PARALLEL with Phase 1 subcommand beads (decoupled architecture). Subcommand handlers return Result<Value, RefusalPayload>; this bead wraps results in envelope. No longer blocks subcommand implementation. Now blocks test beads instead.","created_at":"2026-02-26T12:38:44Z"}]}
{"id":"bd-2g9","title":"PRM-PRO-0027: list/show/diff/describe test suites","description":"Implement focused tests for resolver and read/report command contracts.\n\n## Acceptance Criteria\n- list/show resolution follows v0.1 scope (path-first, then ~/.epistemic/profiles/).\n- diff exits 0 for equivalent profiles and 1 for semantic differences with deterministic report ordering.\n- --describe emits operator manifest before input validation and matches documented fields.\n\n## Notes\nNo witness/refusal matrix duplication here.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-25T04:41:27.964963Z","created_by":"zac","updated_at":"2026-02-26T12:38:54.974778Z","compaction_level":0,"original_size":0,"labels":["coverage","phase-3","profile","tests"],"dependencies":[{"issue_id":"bd-2g9","depends_on_id":"bd-2fp","type":"blocks","created_at":"2026-02-26T12:37:20.628140Z","created_by":"zac"},{"issue_id":"bd-2g9","depends_on_id":"bd-3mb","type":"blocks","created_at":"2026-02-25T04:41:37.116789Z","created_by":"zac"},{"issue_id":"bd-2g9","depends_on_id":"bd-8wl","type":"blocks","created_at":"2026-02-25T04:41:37.021764Z","created_by":"zac"},{"issue_id":"bd-2g9","depends_on_id":"bd-uwq","type":"blocks","created_at":"2026-02-25T04:41:36.972349Z","created_by":"zac"},{"issue_id":"bd-2g9","depends_on_id":"bd-xnw","type":"blocks","created_at":"2026-02-25T04:41:37.070607Z","created_by":"zac"}],"comments":[{"id":16,"issue_id":"bd-2g9","author":"Zac","text":"PRM-0004 plan review: diff compares semantic fields only (format, hashing, equivalence, key, include_columns) — identity fields excluded. list sort: family lexicographic then version numeric ascending. --describe works without subcommand (Option<Command>). All --json assertions should verify unified output envelope shape (PRM-PRO-0029).","created_at":"2026-02-26T11:56:11Z"},{"id":43,"issue_id":"bd-2g9","author":"Zac","text":"RESERVATIONS: tests/list.rs, tests/show.rs, tests/diff.rs, tests/describe.rs. PHASE: 4 (after bd-xnw + bd-8wl + bd-uwq + bd-3mb). Test-only, no src/ changes.","created_at":"2026-02-26T12:27:16Z"},{"id":60,"issue_id":"bd-2g9","author":"Zac","text":"PRM-0011 REVISION: Moved from phase-4 to phase-3. Added bd-2fp dep for --json envelope assertions.","created_at":"2026-02-26T12:38:54Z"}]}
{"id":"bd-2np","title":"PRM-PRO-0006: suggest-key ranking","description":"Implement `profile suggest-key <DATASET>` deterministic key candidate ranking.\n\n## Acceptance Criteria\n- Ranks candidates by uniqueness/null-rate/stability signals deterministically.\n- Supports --top N and --json outputs.\n- Tie-breaking is deterministic and documented in output.\n\n## Notes\nCan reuse stats primitives but must expose dedicated ranking output contract.","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-25T04:25:01.017327Z","created_by":"zac","updated_at":"2026-02-26T12:38:45.004599Z","compaction_level":0,"original_size":0,"labels":["csv","key","phase-1","profile"],"dependencies":[{"issue_id":"bd-2np","depends_on_id":"bd-1r7","type":"blocks","created_at":"2026-02-25T04:43:46.622994Z","created_by":"zac"},{"issue_id":"bd-2np","depends_on_id":"bd-qzc","type":"blocks","created_at":"2026-02-25T04:44:56.521437Z","created_by":"zac"}],"comments":[{"id":6,"issue_id":"bd-2np","author":"Zac","text":"PRM-0004 plan review: tiebreaker is column position in header (earlier = higher rank). Viability threshold for --key auto: uniqueness >= 0.95 and null_rate = 0.0. Below threshold, draft init --key auto sets key: [] and emits stderr warning. Threshold not configurable in v0.1.","created_at":"2026-02-26T11:55:04Z"},{"id":34,"issue_id":"bd-2np","author":"Zac","text":"RESERVATIONS: src/stats/suggest_key.rs. Creates src/stats/mod.rs if bd-1x2 hasnt yet, or appends to it. PHASE: 2 (after bd-2fp). COORDINATION: shares src/stats/mod.rs with bd-1x2 (stats). Both run in phase 2. Prefer bd-1x2 creates mod.rs first.","created_at":"2026-02-26T12:26:42Z"},{"id":52,"issue_id":"bd-2np","author":"Zac","text":"PRM-0011 REVISION: Moved from phase-2 to phase-1. No longer depends on bd-2fp (envelope). RESERVATIONS: src/stats/suggest_key.rs only (mod.rs pre-created by scaffold).","created_at":"2026-02-26T12:38:45Z"}]}
{"id":"bd-2p5","title":"PRM-PRO-0004: draft new implementation","description":"Implement `profile draft new` for blank draft generation.\n\n## Acceptance Criteria\n- `draft new --format csv --out <FILE>` writes a valid draft YAML template.\n- Output is deterministic and schema-valid.\n- Invalid format arguments refuse with clear error mapping.\n\n## Notes\nv0.1 only requires CSV format support.","status":"in_progress","priority":1,"issue_type":"feature","created_at":"2026-02-25T04:25:00.916166Z","created_by":"zac","updated_at":"2026-02-27T04:00:05.405773Z","compaction_level":0,"original_size":0,"labels":["cli","draft","phase-1","profile"],"dependencies":[{"issue_id":"bd-2p5","depends_on_id":"bd-er7","type":"blocks","created_at":"2026-02-25T04:25:01.848821Z","created_by":"zac"},{"issue_id":"bd-2p5","depends_on_id":"bd-qzc","type":"blocks","created_at":"2026-02-25T04:25:01.800453Z","created_by":"zac"}],"comments":[{"id":4,"issue_id":"bd-2p5","author":"Zac","text":"PRM-0004 plan review: draft new prints output path to stdout after writing file. Blank template has key: [] and include_columns: [] with equivalence defaults. Passes validate but freeze rejects empty include_columns.","created_at":"2026-02-26T11:54:54Z"},{"id":27,"issue_id":"bd-2p5","author":"Zac","text":"RESERVATIONS: src/draft/new.rs, src/draft/mod.rs. PHASE: 1 (after bd-er7 + bd-qzc). No file conflicts.","created_at":"2026-02-26T12:26:28Z"},{"id":76,"issue_id":"bd-2p5","author":"Zac","text":"Starting implementation in src/draft/new.rs only: deterministic draft YAML generation for --format csv, write to --out path, print path on success, and map invalid format / IO to refusal payloads.","created_at":"2026-02-27T04:00:05Z"}]}
{"id":"bd-2va","title":"PRM-PRO-0010: freeze canonicalization + hash","description":"Implement `profile freeze` canonicalization and immutable hash semantics.\n\n## Acceptance Criteria\n- Fills defaults (hashing.sha256 and equivalence.order=order-invariant) before canonicalization.\n- Computes profile_sha256 over canonicalized payload and writes frozen profile with profile_id `<family>.v<version>`.\n- Refuses freezing already-frozen profiles and invalid family/version syntax or integer constraints.\n\n## Notes\nv0.1 does not enforce registry-wide monotonicity across historical versions; that is deferred with push/pull workflows.","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-25T04:25:01.223347Z","created_by":"zac","updated_at":"2026-02-26T12:38:44.876793Z","compaction_level":0,"original_size":0,"labels":["determinism","freeze","phase-1","profile"],"dependencies":[{"issue_id":"bd-2va","depends_on_id":"bd-1r7","type":"blocks","created_at":"2026-02-25T04:25:02.349675Z","created_by":"zac"},{"issue_id":"bd-2va","depends_on_id":"bd-er7","type":"blocks","created_at":"2026-02-25T04:25:02.302840Z","created_by":"zac"}],"comments":[{"id":9,"issue_id":"bd-2va","author":"Zac","text":"PRM-0004 plan review: freeze --out refuses if target file already exists (E_IO). Frozen profiles are immutable artifacts — use a new path or delete explicitly. Prints output path to stdout. Canonical form spec now fully defined: field order, block-style YAML only, no blank lines, no comments, exactly one trailing newline. On-disk frozen file uses canonical order but includes blank lines for readability plus profile_sha256 inserted as 5th field.","created_at":"2026-02-26T11:55:21Z"},{"id":32,"issue_id":"bd-2va","author":"Zac","text":"RESERVATIONS: src/freeze/freeze.rs, src/freeze/mod.rs. Reads src/schema/canonical.rs (no write conflict). PHASE: 2 (after bd-2fp).","created_at":"2026-02-26T12:26:42Z"},{"id":50,"issue_id":"bd-2va","author":"Zac","text":"PRM-0011 REVISION: Moved from phase-2 to phase-1. No longer depends on bd-2fp (envelope).","created_at":"2026-02-26T12:38:44Z"}]}
{"id":"bd-2yy","title":"PRM-PRO-0017: draft command test suites","description":"Implement focused tests for draft subcommands (draft new + draft init).\n\n## Acceptance Criteria\n- draft new emits schema-valid deterministic CSV template and rejects unsupported formats.\n- draft init produces include_columns in header order; key behavior covers explicit key, --key auto, and no-candidate fallback.\n- Exit contract and output snapshots are asserted for success/refusal cases.\n\n## Notes\nOther command families are covered by dedicated test beads (schema/lint, stats/suggest/freeze, list/show/diff/describe, witness/refusal).","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-25T04:25:01.586071Z","created_by":"zac","updated_at":"2026-02-26T12:38:54.842739Z","compaction_level":0,"original_size":0,"labels":["coverage","phase-3","profile","tests"],"dependencies":[{"issue_id":"bd-2yy","depends_on_id":"bd-1r7","type":"blocks","created_at":"2026-02-25T04:43:46.767012Z","created_by":"zac"},{"issue_id":"bd-2yy","depends_on_id":"bd-2fp","type":"blocks","created_at":"2026-02-26T12:37:20.469778Z","created_by":"zac"},{"issue_id":"bd-2yy","depends_on_id":"bd-2p5","type":"blocks","created_at":"2026-02-25T04:25:02.762400Z","created_by":"zac"},{"issue_id":"bd-2yy","depends_on_id":"bd-3mb","type":"blocks","created_at":"2026-02-25T04:25:02.720186Z","created_by":"zac"},{"issue_id":"bd-2yy","depends_on_id":"bd-fhp","type":"blocks","created_at":"2026-02-25T04:25:02.902276Z","created_by":"zac"}],"comments":[{"id":17,"issue_id":"bd-2yy","author":"Zac","text":"PRM-0004 plan review: draft new and draft init now print output path to stdout. draft init --key auto requires full dataset parse (E_EMPTY if no data rows). All --json assertions for artifact subcommands should verify unified output envelope with result containing path.","created_at":"2026-02-26T11:56:16Z"},{"id":40,"issue_id":"bd-2yy","author":"Zac","text":"RESERVATIONS: tests/draft_new.rs, tests/draft_init.rs. PHASE: 4 (after bd-fhp + bd-2p5 + bd-3mb). Test-only, no src/ changes.","created_at":"2026-02-26T12:27:16Z"},{"id":58,"issue_id":"bd-2yy","author":"Zac","text":"PRM-0011 REVISION: Moved from phase-4 to phase-3. Added bd-2fp dep for --json envelope assertions.","created_at":"2026-02-26T12:38:54Z"}]}
{"id":"bd-3mb","title":"PRM-PRO-0016: fixture corpus","description":"Build test fixture corpus and shared test utilities for profile CLI testing.\n\n## Acceptance Criteria\n- Fixture set includes valid/invalid draft/frozen YAML profiles and CSV datasets with key/no-key/duplicates/missing columns.\n- Fixture README documents intended usage per test family.\n- Fixture contents are deterministic and reusable across unit/integration tests.\n- Shared test helpers module (tests/common/mod.rs or tests/helpers.rs) provides: CLI binary runner wrapper, temp dir setup/teardown, JSON output assertion helpers, exit code assertion macros.\n- Cargo.toml dev-dependencies are verified present (assert_cmd, predicates, tempfile).\n\n## Notes\nData + test infrastructure bead; no runtime logic changes. All 5 test suite beads depend on this.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-25T04:25:01.532958Z","created_by":"zac","updated_at":"2026-02-27T03:58:47.127724Z","closed_at":"2026-02-27T03:58:47.127578Z","close_reason":"Fixture corpus and shared test helpers added with deterministic profile/dataset cases and reusable CLI/JSON/exit assertion utilities per PRM-PRO-0016.","compaction_level":0,"original_size":0,"labels":["fixtures","phase-0","profile","tests"],"comments":[{"id":21,"issue_id":"bd-3mb","author":"Zac","text":"RESERVATIONS: tests/fixtures/**. PHASE: 0 (no deps). Blocks all 5 test suites. Data-only bead.","created_at":"2026-02-26T12:26:12Z"},{"id":62,"issue_id":"bd-3mb","author":"Zac","text":"PRM-0011 REVISION: Expanded scope to include shared test utilities (CLI runner, assertion helpers, temp dir setup).","created_at":"2026-02-26T12:38:55Z"},{"id":73,"issue_id":"bd-3mb","author":"Zac","text":"Starting fixture corpus + shared test helpers: create deterministic profile YAML and CSV fixture sets (valid/invalid, key/no-key/duplicates/missing columns), add fixture README, and add tests/common/mod.rs with CLI runner/tempdir/JSON helpers/exit assertion macros.","created_at":"2026-02-27T03:56:38Z"},{"id":75,"issue_id":"bd-3mb","author":"Zac","text":"Implemented fixture corpus + shared test helpers.\n\nAdded:\n- tests/fixtures/README.md usage map by test family\n- tests/fixtures/profiles/{valid,invalid} with deterministic draft/frozen YAML cases\n- tests/fixtures/datasets/{valid,invalid} with key/no-key/duplicates/missing-column/header-only/malformed/empty CSV cases\n- tests/common/mod.rs helper module with CLI runner wrapper, temp workspace helper, fixture copy helper, JSON envelope assertions, stdout assertion helper, and exit-code assertion macros (success/issues/refusal)\n\nValidation:\n- cargo fmt --check passed\n- Cargo.toml dev-deps verified present: assert_cmd, predicates, tempfile","created_at":"2026-02-27T03:58:47Z"}]}
{"id":"bd-3td","title":"PRM-PRO-0018: witness/refusal test suites","description":"Implement witness and refusal integration tests for profile CLI.\n\n## Acceptance Criteria\n- Witness append/no-witness behavior tested across eligible and ineligible subcommands.\n- witness query/last/count behavior tested against synthetic ledgers.\n- Refusal envelope shape and detail payloads tested for all refusal codes.\n\n## Notes\nIntegration-level assertion bead; avoid duplicating core command correctness tests.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-25T04:25:01.639663Z","created_by":"zac","updated_at":"2026-02-26T12:38:55.038370Z","compaction_level":0,"original_size":0,"labels":["phase-3","profile","tests","witness"],"dependencies":[{"issue_id":"bd-3td","depends_on_id":"bd-1r7","type":"blocks","created_at":"2026-02-25T04:25:03.364226Z","created_by":"zac"},{"issue_id":"bd-3td","depends_on_id":"bd-21t","type":"blocks","created_at":"2026-02-25T04:25:03.272574Z","created_by":"zac"},{"issue_id":"bd-3td","depends_on_id":"bd-2fp","type":"blocks","created_at":"2026-02-26T12:37:20.682918Z","created_by":"zac"},{"issue_id":"bd-3td","depends_on_id":"bd-3mb","type":"blocks","created_at":"2026-02-25T04:25:03.226228Z","created_by":"zac"},{"issue_id":"bd-3td","depends_on_id":"bd-awi","type":"blocks","created_at":"2026-02-25T04:25:03.318093Z","created_by":"zac"}],"comments":[{"id":13,"issue_id":"bd-3td","author":"Zac","text":"PRM-0004 plan review: refusal envelope is now part of unified output envelope (PRM-PRO-0029). Tests should verify refusal responses use the same envelope shape as success responses, with outcome=REFUSAL and detail in result field. Human-mode refusals go to stderr with code in brackets.","created_at":"2026-02-26T11:55:56Z"},{"id":44,"issue_id":"bd-3td","author":"Zac","text":"RESERVATIONS: tests/witness.rs, tests/refusal.rs. PHASE: 4 (after bd-awi + bd-21t + bd-3mb). Test-only, no src/ changes.","created_at":"2026-02-26T12:27:16Z"},{"id":61,"issue_id":"bd-3td","author":"Zac","text":"PRM-0011 REVISION: Moved from phase-4 to phase-3. Added bd-2fp dep for --json envelope assertions.","created_at":"2026-02-26T12:38:55Z"}]}
{"id":"bd-5q4","title":"PRM-PRO-0028: Homebrew/tap release parity","description":"Implement Homebrew/tap publishing parity for profile release flow if required by distribution strategy.\n\n## Acceptance Criteria\n- Release workflow updates tap metadata/formula (or equivalent) from released artifacts.\n- Version bump and checksum update are deterministic and reproducible.\n- Failure modes are explicit with actionable retry guidance.\n\n## Notes\nDeferred until core release workflow (PRM-PRO-0021) is stable.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-25T04:44:56.761191Z","created_by":"zac","updated_at":"2026-02-26T12:38:26.747500Z","compaction_level":0,"original_size":0,"labels":["deferred","phase-1","profile","release"],"dependencies":[{"issue_id":"bd-5q4","depends_on_id":"bd-13a","type":"blocks","created_at":"2026-02-25T04:45:02.549834Z","created_by":"zac"}],"comments":[{"id":46,"issue_id":"bd-5q4","author":"Zac","text":"RESERVATIONS: .github/workflows/homebrew.yml. PHASE: 5 (P2, after bd-13a). Independent of code.","created_at":"2026-02-26T12:27:23Z"}]}
{"id":"bd-8rq","title":"PRM-PRO-0025: schema+lint test suites","description":"Implement focused tests for validate/lint behavior.\n\n## Acceptance Criteria\n- validate paths: valid draft/frozen pass; malformed/missing-field inputs refuse with correct code/detail.\n- lint paths: missing columns/keys report ISSUES_FOUND (exit 1), parser/input problems refuse (exit 2).\n- Human and --json output contracts are asserted with stable snapshots.\n\n## Notes\nScope excludes stats/suggest/freeze and witness tests (covered by separate beads).","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-25T04:41:27.865096Z","created_by":"zac","updated_at":"2026-02-26T12:38:54.908508Z","compaction_level":0,"original_size":0,"labels":["coverage","phase-3","profile","tests"],"dependencies":[{"issue_id":"bd-8rq","depends_on_id":"bd-1g5","type":"blocks","created_at":"2026-02-25T04:41:36.584099Z","created_by":"zac"},{"issue_id":"bd-8rq","depends_on_id":"bd-1r7","type":"blocks","created_at":"2026-02-25T04:41:36.681707Z","created_by":"zac"},{"issue_id":"bd-8rq","depends_on_id":"bd-2fp","type":"blocks","created_at":"2026-02-26T12:37:20.520702Z","created_by":"zac"},{"issue_id":"bd-8rq","depends_on_id":"bd-3mb","type":"blocks","created_at":"2026-02-25T04:41:36.632566Z","created_by":"zac"},{"issue_id":"bd-8rq","depends_on_id":"bd-e5g","type":"blocks","created_at":"2026-02-25T04:41:36.534727Z","created_by":"zac"}],"comments":[{"id":14,"issue_id":"bd-8rq","author":"Zac","text":"PRM-0004 plan review: validate now checks frozen-profile invariants (profile_sha256 format check: sha256: prefix + 64 hex chars, no hash recomputation). All --json assertions should verify unified output envelope shape (PRM-PRO-0029).","created_at":"2026-02-26T11:56:01Z"},{"id":41,"issue_id":"bd-8rq","author":"Zac","text":"RESERVATIONS: tests/validate.rs, tests/lint.rs. PHASE: 4 (after bd-1g5 + bd-e5g + bd-3mb). Test-only, no src/ changes.","created_at":"2026-02-26T12:27:16Z"},{"id":59,"issue_id":"bd-8rq","author":"Zac","text":"PRM-0011 REVISION: Moved from phase-4 to phase-3. Added bd-2fp dep for --json envelope assertions.","created_at":"2026-02-26T12:38:54Z"}]}
{"id":"bd-8wl","title":"PRM-PRO-0012: diff command","description":"Implement `profile diff <A> <B>` structural diff command.\n\n## Acceptance Criteria\n- Diffs two resolved profiles and reports field-level differences deterministically.\n- Exit 1 when differences exist; exit 0 when equivalent.\n- Supports human and --json output modes.\n\n## Notes\nUses resolution behavior from list/show bead.","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-25T04:25:01.326557Z","created_by":"zac","updated_at":"2026-02-26T12:38:54.647523Z","compaction_level":0,"original_size":0,"labels":["cli","diff","phase-2","profile"],"dependencies":[{"issue_id":"bd-8wl","depends_on_id":"bd-uwq","type":"blocks","created_at":"2026-02-25T04:25:02.493427Z","created_by":"zac"}],"comments":[{"id":11,"issue_id":"bd-8wl","author":"Zac","text":"PRM-0004 plan review: diff compares semantic fields only: format, hashing, equivalence, key, include_columns. Identity fields excluded (profile_id, profile_version, profile_family, profile_sha256, status, schema_version). This means diffing draft vs frozen reports only meaningful differences. Each difference: { field, a_value, b_value }.","created_at":"2026-02-26T11:55:32Z"},{"id":39,"issue_id":"bd-8wl","author":"Zac","text":"RESERVATIONS: src/diff/diff.rs, src/diff/mod.rs. PHASE: 3 (after bd-uwq). Creates diff module.","created_at":"2026-02-26T12:26:51Z"},{"id":55,"issue_id":"bd-8wl","author":"Zac","text":"PRM-0011 REVISION: Moved from phase-3 to phase-2. No longer depends on bd-2fp.","created_at":"2026-02-26T12:38:54Z"}]}
{"id":"bd-awi","title":"PRM-PRO-0015: witness query CLI","description":"Implement `profile witness query|last|count` subcommands.\n\n## Acceptance Criteria\n- query/last/count commands read ledger and support expected filters/options.\n- Human and --json output supported with deterministic ordering.\n- Empty/no-match behavior follows witness conventions and documented exits.\n\n## Notes\nDepends on witness ledger model from PRM-PRO-0014.","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-25T04:25:01.479455Z","created_by":"zac","updated_at":"2026-02-26T12:27:50.239335Z","compaction_level":0,"original_size":0,"labels":["cli","phase-2","profile","witness"],"dependencies":[{"issue_id":"bd-awi","depends_on_id":"bd-21t","type":"blocks","created_at":"2026-02-25T04:25:02.678082Z","created_by":"zac"}],"comments":[{"id":36,"issue_id":"bd-awi","author":"Zac","text":"RESERVATIONS: src/witness/query.rs. Appends to src/witness/mod.rs (created by bd-21t). PHASE: 2 (after bd-21t).","created_at":"2026-02-26T12:26:42Z"}]}
{"id":"bd-e5g","title":"PRM-PRO-0008: validate command","description":"Implement `profile validate <FILE>` schema validation command.\n\n## Acceptance Criteria\n- Valid profile exits 0; schema violations refuse with exit 2 and structured details.\n- Supports human and --json outputs.\n- Handles both draft and frozen profile forms correctly.\n\n## Notes\nSchema-only validation (no dataset checks).","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-25T04:25:01.119349Z","created_by":"zac","updated_at":"2026-02-26T12:38:44.811248Z","compaction_level":0,"original_size":0,"labels":["phase-1","profile","schema","validate"],"dependencies":[{"issue_id":"bd-e5g","depends_on_id":"bd-1r7","type":"blocks","created_at":"2026-02-25T04:25:02.166523Z","created_by":"zac"},{"issue_id":"bd-e5g","depends_on_id":"bd-er7","type":"blocks","created_at":"2026-02-25T04:25:02.123763Z","created_by":"zac"}],"comments":[{"id":7,"issue_id":"bd-e5g","author":"Zac","text":"PRM-0004 plan review: validate now checks frozen-profile invariants when status=frozen (profile_id, profile_version, profile_family, profile_sha256 all present and well-formed). Well-formed for profile_sha256 means sha256: prefix + 64 lowercase hex chars. Does NOT recompute the hash (that requires canonicalization and is a separate concern).","created_at":"2026-02-26T11:55:10Z"},{"id":31,"issue_id":"bd-e5g","author":"Zac","text":"RESERVATIONS: src/schema/validate.rs (extends existing from bd-er7). PHASE: 2 (after bd-2fp). Extends schema validation with command-level checks.","created_at":"2026-02-26T12:26:41Z"},{"id":49,"issue_id":"bd-e5g","author":"Zac","text":"PRM-0011 REVISION: Moved from phase-2 to phase-1. No longer depends on bd-2fp (envelope). Handler returns Result<Value, RefusalPayload>; output formatting is envelope beads job.","created_at":"2026-02-26T12:38:44Z"}]}
{"id":"bd-er7","title":"PRM-PRO-0002: Profile schema model + parser","description":"Implement profile YAML schema models (draft + frozen) and serialization/parsing layer.\n\n## Acceptance Criteria\n- Typed structs for schema_version/status/format/key/include_columns/equivalence/hashing/profile_id/profile_sha256/frozen.\n- Draft and frozen validations enforce required fields and valid enums.\n- Canonical read/write path produces deterministic field ordering for downstream hashing.\n\n## Notes\nFoundation bead for validate/freeze/diff/show/list.","notes":"Follow-up: aligned schema model to PLAN by removing legacy frozen bool field, keeping status/profile_identity/hashing/equivalence/include_columns invariants. Canonical YAML helper excludes profile_sha256 and normalizes document marker/trailing newline. Validation now enforces frozen-only required identity fields and family/SHA format checks. Quality gate rerun clean.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-25T04:25:00.812681Z","created_by":"zac","updated_at":"2026-02-27T03:57:32.067628Z","closed_at":"2026-02-27T03:57:02.059017Z","close_reason":"All acceptance criteria completed: typed structs, draft/frozen validations, canonical read/write with deterministic field ordering. Schema foundation ready for Phase 1 implementations.","compaction_level":0,"original_size":0,"labels":["core","phase-0","profile","schema"],"comments":[{"id":3,"issue_id":"bd-er7","author":"Zac","text":"PRM-0004 plan review: profile_family must match ^[a-z][a-z0-9]*(\\.[a-z][a-z0-9_]*)*$ (lowercase dot-separated segments, each starting with letter, underscores allowed within segments). profile_sha256 value format is sha256:<64 lowercase hex chars>. include_columns must be non-empty for freeze; validate accepts empty [].","created_at":"2026-02-26T11:54:49Z"},{"id":19,"issue_id":"bd-er7","author":"Zac","text":"RESERVATIONS: src/schema/profile.rs, src/schema/validate.rs, src/schema/canonical.rs, src/schema/mod.rs. PHASE: 0 (no deps). Critical path, blocks 7 beads.","created_at":"2026-02-26T12:26:12Z"},{"id":69,"issue_id":"bd-er7","author":"Zac","text":"Picked next ready bead after scaffold: beginning schema model/parser implementation in src/schema/*.","created_at":"2026-02-27T03:54:12Z"},{"id":70,"issue_id":"bd-er7","author":"Zac","text":"Picked up after scaffold completion. Next: implement typed schema structs and deterministic canonical read/write in src/schema/{profile,validate,canonical}.rs.","created_at":"2026-02-27T03:54:25Z"},{"id":74,"issue_id":"bd-er7","author":"Zac","text":"Initial schema module work landed: split src/schema into profile.rs/validate.rs/canonical.rs, added typed profile structs/enums, basic parse+validation helpers (family/sha checks, frozen invariants), and canonical YAML + SHA256 helpers. Quality gate currently passes (fmt/clippy/test).","created_at":"2026-02-27T03:57:00Z"}]}
{"id":"bd-fhp","title":"PRM-PRO-0007: draft init implementation","description":"Implement `profile draft init <DATASET>` header-driven draft generation for CSV.\n\n## Acceptance Criteria\n- include_columns populated from dataset header in file order.\n- `--key <COLUMN>` sets explicit key; `--key auto` uses top suggest-key candidate.\n- Draft defaults include float_decimals=6 and trim_strings=true; order/hashing omitted until freeze.\n\n## Notes\nDepends on CSV parsing and suggest-key behavior for auto mode.","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-25T04:25:01.067851Z","created_by":"zac","updated_at":"2026-02-26T12:38:54.711846Z","compaction_level":0,"original_size":0,"labels":["csv","draft","phase-2","profile"],"dependencies":[{"issue_id":"bd-fhp","depends_on_id":"bd-1r7","type":"blocks","created_at":"2026-02-25T04:43:46.670188Z","created_by":"zac"},{"issue_id":"bd-fhp","depends_on_id":"bd-2np","type":"blocks","created_at":"2026-02-25T04:25:02.077033Z","created_by":"zac"},{"issue_id":"bd-fhp","depends_on_id":"bd-er7","type":"blocks","created_at":"2026-02-25T04:25:02.031534Z","created_by":"zac"},{"issue_id":"bd-fhp","depends_on_id":"bd-qzc","type":"blocks","created_at":"2026-02-25T04:25:01.985212Z","created_by":"zac"}],"comments":[{"id":5,"issue_id":"bd-fhp","author":"Zac","text":"PRM-0004 plan review: --key auto requires parsing full dataset (all rows) for suggest-key computation, not just header. E_EMPTY if no data rows when --key auto. Prints output path to stdout after writing.","created_at":"2026-02-26T11:54:59Z"},{"id":37,"issue_id":"bd-fhp","author":"Zac","text":"RESERVATIONS: src/draft/init.rs. Appends to src/draft/mod.rs (created by bd-2p5). PHASE: 3 (after bd-2np). Uses suggest-key internally for --key auto.","created_at":"2026-02-26T12:26:51Z"},{"id":56,"issue_id":"bd-fhp","author":"Zac","text":"PRM-0011 REVISION: Moved from phase-3 to phase-2. RESERVATIONS: src/draft/init.rs only (mod.rs pre-created by scaffold).","created_at":"2026-02-26T12:38:54Z"}]}
{"id":"bd-qei","title":"PRM-PRO-0022: CI quality gates + test matrix","description":"Establish CI baseline comparable to rvl standards for build correctness and regression safety.\n\n## Acceptance Criteria\n- CI runs formatting/lint/type checks and test suite on pull_request and push to main.\n- Matrix dimensions (OS/toolchain) are explicit and intentionally scoped for runtime budget.\n- Failing jobs print local reproduction commands in logs or job summary.\n\n## Notes\nKeep runtime bounded; avoid excessive matrix fan-out for early-stage repo.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-25T04:38:11.659272Z","created_by":"zac","updated_at":"2026-02-27T03:53:45.124312Z","closed_at":"2026-02-27T03:53:45.124217Z","close_reason":"Added CI quality-gate workflow with explicit bounded matrix, required checks, and failure repro guidance per PRM-PRO-0022.","compaction_level":0,"original_size":0,"labels":["ci","phase-0","profile","tests"],"comments":[{"id":23,"issue_id":"bd-qei","author":"Zac","text":"RESERVATIONS: .github/workflows/ci.yml. PHASE: 0 (no deps). Independent of code beads.","created_at":"2026-02-26T12:26:16Z"},{"id":66,"issue_id":"bd-qei","author":"Zac","text":"Starting implementation: add .github/workflows/ci.yml with explicit matrix (bounded runtime), fmt+clippy+test gates on push main + pull_request, and failure reproduction guidance in summary/logs.","created_at":"2026-02-27T03:52:55Z"},{"id":68,"issue_id":"bd-qei","author":"Zac","text":"Implemented .github/workflows/ci.yml: triggers on push(main)+pull_request(main), explicit bounded matrix (os=ubuntu-latest, toolchain=stable), and full quality gate (cargo fmt --check, cargo check, cargo clippy --all-targets -- -D warnings, cargo test). Added failure step that prints local reproduction commands to logs and GITHUB_STEP_SUMMARY.","created_at":"2026-02-27T03:53:45Z"}]}
{"id":"bd-qzc","title":"PRM-PRO-0001: Scaffold crate + CLI surface","description":"Build crate skeleton, full CLI surface, and module stubs for parallel development.\n\n## Acceptance Criteria\n- src/main.rs + src/lib.rs present with run() -> u8 exit mapping.\n- CLI command tree includes draft/validate/lint/stats/suggest-key/freeze/list/show/diff/witness.\n- Global flags wire-up: --describe, --schema (stub allowed), --version, --no-witness.\n- command field is Option<Command> so --describe and --version work without a subcommand.\n- Step 4 in execution flow: if command is None and no early-exit flag matched, exit 2.\n- lib.rs has FULL dispatch match block calling subcommand handler stubs in each module.\n- Cargo.toml includes ALL prod deps (clap, serde, serde_yaml, serde_json, csv, sha2, blake3, chrono) AND dev deps (assert_cmd, predicates, tempfile).\n- Creates module directories and mod.rs files with re-exports for: draft/, freeze/, lint/, stats/, resolve/, diff/, output/, witness/. Each mod.rs declares all planned submodules.\n- Creates placeholder .rs files with todo!() function stubs for all subcommand handlers (e.g. draft/new.rs, stats/stats.rs, etc.). Does NOT create stubs for src/schema/ or src/refusal/ (owned by bd-er7 and bd-1r7).\n- Subcommand handler stubs return Result<serde_json::Value, RefusalPayload> (the decoupled output interface).\n- cargo check passes after ALL Phase 0 beads complete (scaffold + schema model + refusal codes).\n\n## Notes\nThe scaffold creates the dispatch skeleton so that subsequent beads only edit their own .rs files — no bead touches lib.rs or any mod.rs after this. This eliminates all file contention for parallel agents.","acceptance_criteria":"src/main.rs + src/lib.rs present with run() -> u8 exit mapping.\nCLI command tree includes draft/validate/lint/stats/suggest-key/freeze/list/show/diff/witness.\nGlobal flags wire-up: --describe, --schema (stub allowed), --version, --no-witness.\ncommand field is Option<Command> so --describe and --version work without a subcommand.\nStep 4 in execution flow: if command is None and no early-exit flag matched, exit 2.","notes":"Scaffolded crate and CLI surface with Option<Command>, global --json/--describe/--schema/--no-witness, full dispatch in src/lib.rs, and module stubs for draft/freeze/lint/stats/resolve/diff/output/witness. Verified with cargo check, cargo fmt --check, cargo test, and cargo clippy --all-targets -- -D warnings.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-25T04:25:00.764202Z","created_by":"zac","updated_at":"2026-02-27T03:53:29.250317Z","closed_at":"2026-02-27T03:53:09.246145Z","close_reason":"Scaffold complete - cargo check passes with all CLI surface, module stubs, dispatch, and operator.json","compaction_level":0,"original_size":0,"labels":["cli","core","phase-0","profile"],"comments":[{"id":1,"issue_id":"bd-qzc","author":"Zac","text":"PRM-0004 plan review: command field in Cli struct is now Option<Command> so profile --describe and profile --version work without a subcommand. Execution flow adds step 4: if command is None after early-exit flags, exit 2.","created_at":"2026-02-26T11:54:27Z"},{"id":18,"issue_id":"bd-qzc","author":"Zac","text":"RESERVATIONS: src/main.rs, src/lib.rs, src/cli/args.rs, src/cli/exit.rs, src/cli/mod.rs, Cargo.toml. PHASE: 0 (no deps). Critical path, blocks 10 beads.","created_at":"2026-02-26T12:26:12Z"},{"id":47,"issue_id":"bd-qzc","author":"Zac","text":"PRM-0011 REVISION: Expanded scope to create ALL module stubs (draft/, freeze/, lint/, stats/, resolve/, diff/, output/, witness/). Full dispatch in lib.rs. Does NOT create src/schema/ or src/refusal/ (owned by bd-er7, bd-1r7). Subcommand handlers return Result<Value, RefusalPayload> via decoupled output interface. RESERVATIONS: src/main.rs, src/lib.rs, src/cli/*, Cargo.toml + creates stubs for all other modules.","created_at":"2026-02-26T12:38:44Z"},{"id":67,"issue_id":"bd-qzc","author":"Zac","text":"Scaffold now compiles with full CLI + dispatch stubs; wired draft/validate/lint/stats/suggest-key/freeze/list/show/diff/witness, Option<Command> no-subcommand -> exit 2, and global flags --describe/--schema/--version/--no-witness. Ran cargo fmt, cargo clippy --all-targets -- -D warnings, and cargo test (all passing).","created_at":"2026-02-27T03:53:29Z"}]}
{"id":"bd-uwq","title":"PRM-PRO-0011: list/show resolution","description":"Implement profile resolution + `list` + `show` commands for v0.1.\n\n## Acceptance Criteria\n- Resolution order supports file path first, then profile-id search in `~/.epistemic/profiles/` (v0.1 scope).\n- `list` returns deterministic ordering; `show` renders resolved profile (human + --json).\n- Missing profiles return structured refusal.\n\n## Notes\nBuilt-ins and `EPISTEMIC_PROFILE_PATH` are explicitly deferred in v0.1.","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-25T04:25:01.275739Z","created_by":"zac","updated_at":"2026-02-26T12:38:44.938620Z","compaction_level":0,"original_size":0,"labels":["cli","phase-1","profile","resolution"],"dependencies":[{"issue_id":"bd-uwq","depends_on_id":"bd-1r7","type":"blocks","created_at":"2026-02-25T04:43:46.718559Z","created_by":"zac"},{"issue_id":"bd-uwq","depends_on_id":"bd-er7","type":"blocks","created_at":"2026-02-25T04:25:02.444044Z","created_by":"zac"},{"issue_id":"bd-uwq","depends_on_id":"bd-qzc","type":"blocks","created_at":"2026-02-25T04:25:02.399068Z","created_by":"zac"}],"comments":[{"id":10,"issue_id":"bd-uwq","author":"Zac","text":"PRM-0004 plan review: list sort order now specified — sort by profile_family (lexicographic), then profile_version (numeric ascending). Filename convention: frozen profiles stored as <profile_id>.yaml. list scans *.yaml files and parses profile_id field. show resolves by matching profile_id field in scanned files (not filename alone).","created_at":"2026-02-26T11:55:27Z"},{"id":33,"issue_id":"bd-uwq","author":"Zac","text":"RESERVATIONS: src/resolve/resolver.rs, src/resolve/list.rs, src/resolve/mod.rs. PHASE: 2 (after bd-2fp). Creates resolve module.","created_at":"2026-02-26T12:26:42Z"},{"id":51,"issue_id":"bd-uwq","author":"Zac","text":"PRM-0011 REVISION: Moved from phase-2 to phase-1. No longer depends on bd-2fp (envelope).","created_at":"2026-02-26T12:38:44Z"}]}
{"id":"bd-xnw","title":"PRM-PRO-0013: operator manifest + --describe","description":"Implement operator manifest and `--describe` command path.\n\n## Acceptance Criteria\n- Embedded operator.json reflects profile command capabilities/exit/refusal map.\n- `--describe` prints manifest and exits 0 before input validation.\n- Manifest fields align with docs/PLAN.md operator section.\n\n## Notes\nNon-goal: network push/pull manifest details beyond v0.1.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-25T04:25:01.378425Z","created_by":"zac","updated_at":"2026-02-27T03:58:49.052707Z","closed_at":"2026-02-27T03:58:49.052542Z","close_reason":"Operator manifest + --describe complete - reads operator.json and outputs in both human and JSON envelope modes","compaction_level":0,"original_size":0,"labels":["docs","operator","phase-1","profile"],"dependencies":[{"issue_id":"bd-xnw","depends_on_id":"bd-qzc","type":"blocks","created_at":"2026-02-25T04:25:02.539657Z","created_by":"zac"}],"comments":[{"id":29,"issue_id":"bd-xnw","author":"Zac","text":"RESERVATIONS: operator.json (embedded resource), minor touch src/cli/args.rs (describe path). PHASE: 1 (after bd-qzc). Wait for scaffold to finish before touching args.rs.","created_at":"2026-02-26T12:26:28Z"}]}
